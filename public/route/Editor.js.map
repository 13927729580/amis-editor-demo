{"version":3,"sources":["/route/Editor.tsx"],"names":[],"mappings":";;;;;AAAA,wDAA0B;AAC1B,gDAAwC;AACxC,yCAA4C;AAG5C,6BAA6D;AAE7D,IAAI,YAAY,GAAG,CAAC,CAAC,CAAC;AAEtB,kBAAe,mBAAM,CAAC,OAAO,CAAC,CAC1B,qBAAQ,CAAC,UAAS,EAA0F;QAAzF,gBAAK,EAAE,sBAAQ,EAAE,oBAAO,EAAE,gBAAK;IAC9C,IAAM,KAAK,GAAW,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAEpD,IAAI,KAAK,KAAK,YAAY,EAAE;QACxB,YAAY,GAAG,KAAK,CAAC;QACrB,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC;KACjD;IAED;QACI,KAAK,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAChC,YAAK,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IAChC,CAAC;IAED;QACI,OAAO,CAAC,IAAI,CAAC,MAAI,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAM,CAAC,CAAC;IAChD,CAAC;IAED;QACI,OAAO,CACH,uCAAK,SAAS,EAAC,2CAA2C;YACtD,uCAAK,SAAS,EAAC,gCAAgC,8BAAe;YAE9D,uCAAK,SAAS,EAAC,gBAAgB;;gBACxB,GAAG;gBACN,8BAAC,aAAM,IACH,KAAK,EAAE,KAAK,CAAC,OAAO,EACpB,QAAQ,EAAE,UAAC,KAAc,IAAK,YAAK,CAAC,UAAU,CAAC,KAAK,CAAC,EAAvB,CAAuB,EACrD,SAAS,EAAC,QAAQ,EAClB,MAAM,SACR,CACA;YAEN,uCAAK,SAAS,EAAC,oBAAoB;gBAC/B,uCAAK,SAAS,EAAE,iBAAE,CAAC,UAAU,CAAC,EAAE,OAAO,EAAE,IAAI,mBAEvC;gBAEN,uCAAK,SAAS,EAAC,UAAU,EAAC,OAAO,EAAE,IAAI,mBAEjC,CACJ,CACJ,CACT,CAAC;IACN,CAAC;IAED,OAAO,CACH,8BAAC,aAAM,IAAC,MAAM,EAAE,YAAY,EAAE;QAC1B,8BAAC,oBAAM,IACH,KAAK,EAAE,SAAS,EAChB,OAAO,EAAE,KAAK,CAAC,OAAO,EACtB,KAAK,EAAE,KAAK,CAAC,MAAM,EACnB,QAAQ,EAAE,UAAC,KAAU,IAAK,YAAK,CAAC,YAAY,CAAC,KAAK,CAAC,EAAzB,CAAyB,EACnD,SAAS,EAAC,UAAU,GACtB,CACG,CACZ,CAAC;AACN,CAAC,CAAC,CACL,CAAC","file":"Editor.js","sourcesContent":["import React from 'react';\nimport {Editor} from '@fex/amis-editor';\nimport {inject, observer} from 'mobx-react';\nimport {IMainStore} from '../store';\nimport {RouteComponentProps} from 'react-router-dom';\nimport {Layout, Switch, classnames as cx, toast} from 'amis';\n\nlet currentIndex = -1;\n\nexport default inject('store')(\n    observer(function({store, location, history, match}: {store: IMainStore} & RouteComponentProps<{id: string}>) {\n        const index: number = parseInt(match.params.id, 10);\n\n        if (index !== currentIndex) {\n            currentIndex = index;\n            store.updateSchema(store.pages[index].schema);\n        }\n\n        function save() {\n            store.updatePageSchemaAt(index);\n            toast.success('保存成功', '提示');\n        }\n\n        function exit() {\n            history.push(`/${store.pages[index].path}`);\n        }\n\n        function renderHeader() {\n            return (\n                <div className=\"editor-header clearfix box-shadow bg-dark\">\n                    <div className=\"navbar-brand text-lt font-thin\">AMis 编辑器</div>\n\n                    <div className=\"editor-preview\">\n                        预览{' '}\n                        <Switch\n                            value={store.preview}\n                            onChange={(value: boolean) => store.setPreview(value)}\n                            className=\"m-l-xs\"\n                            inline\n                        />\n                    </div>\n\n                    <div className=\"editor-header-btns\">\n                        <div className={cx('btn-item')} onClick={save}>\n                            保存\n                        </div>\n\n                        <div className=\"btn-item\" onClick={exit}>\n                            退出\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <Layout header={renderHeader()}>\n                <Editor\n                    theme={'default'}\n                    preview={store.preview}\n                    value={store.schema}\n                    onChange={(value: any) => store.updateSchema(value)}\n                    className=\"is-fixed\"\n                />\n            </Layout>\n        );\n    })\n);\n"]}